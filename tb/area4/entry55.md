# []()[浅谈]MAD的素材收集/处理/导入,成品的压制等相关经验  
原作者 百度贴吧:V-R- [原地址](https://tieba.baidu.com/p/2342171890) 首发时间:2013-05-21 19:45  
最新获取时间:2021-04-26  
  
技术力不足而做其他贡献系列之2…  
  
在此楼中您将看到的内容有  
MAD/AMV的素材收集相关(动画/静画)  
mkv类素材的处理问题  
各类素材导入问题  
输出与压制等问题  
MAD战U2B/NICO/B站的相关事宜(更新)  
相关工具  
——————————————请勿插楼,谢谢合作——————————————  

首先是素材,素材的搜集,或曰收集,我还是倾向于收集,因为我会把我认为可能需要的素材都当做收藏动画一样储存于盘中;这个问题是新人经常问的,也算是最基础的问题罢  
首先是静画  
这1点可能没什么好讲的,P站、drawyoo神马的,注意注明出处即可;唯一例外的是各种GAL的CG或立绘,下CG包是个办法,不过部分18X的GAL这类资源不很好找,有些干脆没有立绘,在这里推荐Crass这个工具,绝大多数GAL都可以利用此工具拆包,除CG外还可获得PNG格式或带有alpha通道的BMP格式立绘,说得简单粗暴点就是无损的免抠,这些素材可能会起到重要作用  
下一层讲动画  

好,到了关键部分了,MKV的问题  
这个问题算是老生常谈了,LZ也一度被折磨得死去活来,不过现在算是完全没问题了  
首先MKV基本是无法直接导入各类软件的,原因很简单,那就是MKV根本就不是个格式,只是个万能容器,它封装的视频流可能是AVI的Dvix也可能是WMV的WM9也可能是MP4的H.264,音频可能是FLAC也可能是AAC甚至可能是WAV,所以我们无法用常规的方法处理它  
MAD把有人层提到过直接用MC封装成MP4,但有部分人失败了,为何?原因即那个失败的MKV里封装的视频流/音频流,很可能是MP4无法封入的(其他格式的视频都对能封入的视频流编码有严格限制,例如你把1个音频流为FLAC的WAV直接封装成MP4,那无疑会失败)  
在此LZ推荐2款工具,MKVToolNix与MkvToMp4  
MKVToolNix部分人已很熟悉了,它就是个MKV工具,可以自由组合里面的音频流/视频流/字幕,它的作用后面讲,这里讲关键点——MkvToMp4  
MkvToMp4是个傻瓜式的工具,它的界面一目了然,也是可以自由选择里面的视频流/音频流,然后封装成MP4——但最大的区别就在于它有个自动识别功能:如果音频流不是MP4能封装的格式,它会自动将音频流转码为MP4可封装的AAC格式再进行操作;如果视频流不是MP4能封装的格式,亦同上——但是这个年代理论上不会有字幕组拿MKV封装别的格式,毕竟这些格式才能符合如今的清晰度标准,因此,MkvToMp4只会进行1个自动识别音频流再进行视频流无损封装的工作,速度也很快,效果也不错  
MkvToMp4唯一的问题就是面对1个复杂的MKV(假设我有1个MKV封装了1视频流+3音轨+3字幕),它很容易出错,这应该是软件内部的架构问题所致,这时我们就需要上面提到过的MKVToolNix了——先用MKVToolNix把这个复杂的MKV中自己需要的那个视频流+音频流这2轨重新封装成1个简单的MKV,再用MkvToMp4处理那个简单的MKV得到最终的MP4,大功告成  

10bit素材的问题  
10bit指的是色深,因此用不支持10bit解码的软件播放10bit视频时部分画面会出现色彩异常的情况;一般来说,直接将10bit素材导入各类视频编辑软件也会出现色彩问题  
以LZ有限的经验来看,要转码的话,似乎只有t-mod x264编码器转码出来没问题(LZ对10bit视频的转码尝试过格式工厂、MC、狸窝、魔影工厂、小丸这5款软件,只有小丸正常,比较它们的x264编码器后发现唯一的区别在于小丸用的是t-mod而其他软件用的是原版),不知者是否就是原因。总之,如果要以转码来解决的话,小丸几乎是唯一的选择,使用过程中可配合Ultra Video Splitter这类无损视频切割工具先进行切割再进行部分转码  
但是这显然还是略麻烦,因此还有2种其它办法  
1.录屏。Fraps、Bandicam或是Potplayer自带的录屏功能都可以很好地实现之  
2.直接用格式工厂进行部分转码！虽说这样转可能会出问题,但要注意的是10bit直接转8bit不是每个片段都会出现不正常情况,一般来说,只有部分场景会出现色彩异常,对于那些转码后正常的场景,可直接用格式工厂进行部分转码  

最后就是压制与上传,这1点大幅更新;讲3点-B站,U2B,NICO,首先还是B站  
  
由于B站现在已开始启用乐视源,战渣浪的历史已不再,虽然目前还是用的渣浪源投稿,但码率要求等方面也已完全变化——只要原码率不是太离谱(3000+甚至4000+神马的),封装成FLV后黑到一千整再上传,妥妥的,乐视会自动帮你重新无损封装去后黑  
在此无责任提供1个可用于站渣浪压制的参数(须配合小丸x264自定义压制使用,将参数复制至其参数栏即可)  
--crf 24 --preset veryslow --subme 10 --ref 10 --bframes 8 --qcomp 0.75 --psy-rd 0:0 --keyint 360 --min-keyint 1 --aq-strength 0.8 --aq-mode 3  
crf为质量参数,22-25之间皆可(可为小数),数字越大码率约低,压得越厉害;如果嫌这样压制太慢,也可将preset后面的veryslow换成slower;ref为编码复杂度,事实证明若ref达到12的话部分旧电脑会跟不上(上次世萌PV使用--ref 12后在B站出现有“全屏马赛克”的反映),保险起见写为10;--aq-mode 3,模式3为t-mod x264独有,倘若要在其它软件中使用此参数的话须将其改为mode 2(除非那个软件也调用的是t-mod x264编码器)  

U2B：无差别NC二压,想都别想,直接大文件往上杂就OK,毫无技术可言  
NICO：鉴于国内对静画系欣赏力是在不足以及NICO墙垮等因素部分MADer完全可考虑前往NICO发展,唯一拦路虎就是NICO对于免费用户的恶心限制——格式必须MP4,总码率不超过620kbps,文件大小不超过40M  
对于这种恶心的要求,我们能做的也只有1点了——后黑  
没错,就是后黑,MP4后黑,其实和FLV原理一样,以无视频流的黑屏拖低平均码率以达到蒙混过关的目的;只是FLV有专门后黑的工具,而MP4似乎只能手动后黑  
后黑方法:其实很简单,就是在视频渲染时在视频结束后再放一段无声的音频,视频流空缺,这样那一段播放起来时就完全是无声的黑屏;在用x264进行指定码率的2次编码时,后面这段黑屏会使总码率大幅降低,以达到后黑的目的  
那么有人可能会问这段后黑该取多长呢?LZ做了下试验,大致应该是这个结果:  
由于NICO的限制是40M+620kbps,一般来说,MAD在NICO投稿可采用视频流570kbps+49kbps的Nero AAC音频流(总码率619kbps),根据1KByte/s=8Kbps,40*1024*8/570=574.877s,保险起见,缩减为9分30秒——这个即使正片+后黑的长度;例如MAD时长3分钟,则后置1个6分半的无声音频,这样后面这个6分半的时间就是后黑,与原来战渣浪常用的FLV后黑效果无异。再将这个有后黑的输出文件利用小丸进行x264视频目标码率为570kbps的2次编码即可(换算过来MAD本身码率大约在1000多一点的样子,足矣)  

内容大致就是以上这些,其中提到的软件关键字列于下方(度娘吞链接吞得厉害,1次性放这么多链接还是不敢,大家用关键字百度罢,下载很好找的)  
  
crass-0.4.14.0-final  
MKVToolNix  
MkvtoMp4  
终极解码(或FinalCodecs)  
Bandicam(这个建议直接去Bandicam吧下载贴吧破解版)  
frameserver(这个推荐直接去官网www.debugmode.com/frameserver 教程可以在百度搜索看-其实也没什么教程,看1遍就懂,巨简单)  
小丸工具箱  
  
——————————结束,可以插楼了(呃好像这已不能叫插楼了罢)——————————  

